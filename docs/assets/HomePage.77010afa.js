import{_ as u,M as p,e as v,c as l,a as o,w as P,f as _,v as m,F as y,r as b,t as h,o as n,g as f,h as M}from"./index.14a320e3.js";const x="88d2c735e36149b50c9d46f09826ec06",c="https://api.themoviedb.org/3",d="/movie/popular",S="/search/movie",i={api_key:x,language:"en-US",query:"",page:1},T={name:"MoviePage",components:{MovieCard:p},data(){return{movies:[],currentPage:i.page,totalPages:1,endpoint:`${c}${d}`,searchQuery:""}},methods:{async getMovies(a){try{const e=await v.get(this.endpoint,{params:a});this.movies=e.data.results,this.currentPage=e.data.page,this.totalPages=e.data.total_pages}catch(e){console.error(e)}},handleSearch(){const a=this.searchQuery.trim();a?(this.endpoint=`${c}${S}`,this.getMovies({...i,query:a})):(this.endpoint=`${c}${d}`,this.getMovies(i))},handlePreviousPage(){this.currentPage>1&&(this.getMovies({...i,page:this.currentPage-1}),this.scrollToTop())},handleNextPage(){this.currentPage<this.totalPages&&(this.getMovies({...i,page:this.currentPage+1}),this.scrollToTop())},scrollToTop(){const a={top:0,left:0,behavior:"smooth"};window.scrollTo(a)}},mounted(){this.getMovies(i)}},N={class:"px-5"},k=o("button",{class:"btn text-light",type:"submit"},"search",-1),E={class:"movie-list"},A={key:1},C={class:"pagination pb-3 text-light"},w=["disabled"],O=["disabled"];function B(a,e,D,I,s,r){const g=M("MovieCard");return n(),l("div",null,[o("div",N,[o("form",{class:"search-form",onSubmit:e[1]||(e[1]=P((...t)=>r.handleSearch&&r.handleSearch(...t),["prevent"]))},[_(o("input",{class:"",placeholder:"Search movies...",type:"text",id:"query",name:"query","onUpdate:modelValue":e[0]||(e[0]=t=>s.searchQuery=t)},null,512),[[m,s.searchQuery]]),k],32)]),o("div",E,[s.movies.length>0?(n(!0),l(y,{key:0},b(s.movies,t=>(n(),f(g,{key:t.id,movie:t},null,8,["movie"]))),128)):(n(),l("p",A,"No movies found."))]),o("div",C,[o("button",{class:"btn-color",onClick:e[2]||(e[2]=(...t)=>r.handlePreviousPage&&r.handlePreviousPage(...t)),disabled:s.currentPage===1},"Previous",8,w),o("span",null,h(s.currentPage)+"/"+h(s.totalPages),1),o("button",{class:"btn-color",onClick:e[3]||(e[3]=(...t)=>r.handleNextPage&&r.handleNextPage(...t)),disabled:s.currentPage===s.totalPages},"Next",8,O)])])}const q=u(T,[["render",B]]);export{q as default};
