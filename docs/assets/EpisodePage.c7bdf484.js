import{_ as m,c,a as d,t as h,d as u,o as l}from"./index.14a320e3.js";const v={name:"EpisodePage",data(){return{episode:null,show:null,season:null,prevEpisode:null,nextEpisode:null}},async created(){await this.fetchEpisodeDetails()},watch:{$route:{immediate:!0,async handler(){await this.fetchEpisodeDetails()}}},computed:{episodeUrl(){const{id:e,season:s,episode:n}=this.$route.params;return`https://autoembed.to/tv/tmdb/${e}-${s}-${n}`}},methods:{async fetchEpisodeDetails(){const{id:e,season:s,episode:n}=this.$route.params,a=await fetch(`https://api.themoviedb.org/3/tv/${e}/season/${s}/episode/${n}?api_key=88d2c735e36149b50c9d46f09826ec06`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);this.episode=await a.json();const o=await fetch(`https://api.themoviedb.org/3/tv/${e}?api_key=88d2c735e36149b50c9d46f09826ec06`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);this.show=await o.json();const t=await fetch(`https://api.themoviedb.org/3/tv/${e}/season/${s}?api_key=88d2c735e36149b50c9d46f09826ec06`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.season=await t.json();const r=this.season.episodes.length,i=this.season.episodes.findIndex(p=>p.episode_number===this.episode.episode_number);i>0&&(this.prevEpisode=`/onShow/${e}/seasons/${s}/episodes/${this.season.episodes[i-1].episode_number}`),i<r-1&&(this.nextEpisode=`/onShow/${e}/seasons/${s}/episodes/${this.season.episodes[i+1].episode_number}`)},goToEpisode(e){this.$router.push(e)}}},f={class:"episode-page"},E={class:"video-container2"},w=["src"],b={class:"episode-details"},g={class:"title text-light"},$={class:"air-date text-light"},x={class:"overview text-light"},k={class:"buttons"},y=["disabled"],T=["disabled"];function P(e,s,n,a,o,t){var r,i,p;return l(),c("div",f,[d("div",E,[d("iframe",{allowfullscreen:"",src:t.episodeUrl,frameborder:"0"},null,8,w)]),d("div",b,[d("h2",g,h((r=o.episode)==null?void 0:r.name),1),d("p",$,"Air date: "+h((i=o.episode)==null?void 0:i.air_date),1),d("p",x,h((p=o.episode)==null?void 0:p.overview),1),d("div",k,[o.prevEpisode?(l(),c("button",{key:0,class:"btn text-light",onClick:s[0]||(s[0]=_=>t.goToEpisode(o.prevEpisode)),disabled:e.loading}," Previous Episode ",8,y)):u("",!0),o.nextEpisode?(l(),c("button",{key:1,class:"btn text-light",onClick:s[1]||(s[1]=_=>t.goToEpisode(o.nextEpisode)),disabled:e.loading}," Next Episode ",8,T)):u("",!0)])])])}const D=m(v,[["render",P]]);export{D as default};
